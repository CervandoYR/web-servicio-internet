{"ast":null,"code":"import Swal from \"sweetalert2\";\nimport { Form, Field, ErrorMessage, defineRule, configure } from \"vee-validate\";\nimport { required, email } from \"@vee-validate/rules\";\nimport 'aos/dist/aos.css';\nconst SCRIPT_URL = \"https://script.google.com/macros/s/AKfycbzyKIt1fHs6q8avqDymVh8S_a57HAH-_ZPWm3R1l1prwPH9zmPIbyx_09CMsalrdYDsRQ/exec\";\n\n// Definir reglas de validación (movido fuera del export default para mejor práctica)\ndefineRule(\"onlyLetters\", value => {\n  const onlyLettersRegex = /^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]+$/;\n  return !value || onlyLettersRegex.test(value) || \"Este campo solo debe contener letras y espacios.\";\n});\ndefineRule(\"textWithNumbers\", value => {\n  const onlyNumbersRegex = /^[0-9]+$/;\n  return !value || !onlyNumbersRegex.test(value) || \"El mensaje no puede contener solo números.\";\n});\ndefineRule(\"phoneNumber\", value => {\n  const phoneRegex = /^[0-9]{9}$/;\n  return !value || phoneRegex.test(value) || \"El teléfono debe tener 9 dígitos numéricos.\";\n});\ndefineRule(\"required\", required);\ndefineRule(\"email\", email);\nconfigure({\n  validateOnInput: true,\n  // Validar mientras se escribe\n  generateMessage: context => {\n    const messages = {\n      required: \"Este campo es obligatorio.\",\n      email: \"Correo electrónico inválido.\",\n      onlyLetters: \"Solo se permiten letras y espacios.\",\n      textWithNumbers: \"No puede ser solo números.\",\n      phoneNumber: \"Debe tener 9 dígitos numéricos.\"\n    };\n    return messages[context.rule.name] || `Error en el campo.`;\n  }\n});\nexport default {\n  name: \"ContactPage\",\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n  data() {\n    return {\n      name: \"\",\n      lastname: \"\",\n      email: \"\",\n      phone: \"\",\n      message: \"\",\n      isSubmitting: false\n    };\n  },\n  mounted() {\n    // AOS se inicializa en la vista padre (HomePage)\n    // AOS.init({ duration: 1000 });\n  },\n  methods: {\n    async submitForm() {\n      this.isSubmitting = true;\n      const formData = new FormData();\n      formData.append('name', this.name);\n      formData.append('lastname', this.lastname);\n      formData.append('email', this.email);\n      formData.append('phone', this.phone);\n      formData.append('message', this.message);\n      try {\n        const response = await fetch(SCRIPT_URL, {\n          method: 'POST',\n          body: formData\n        });\n\n        // Verifica si la respuesta es OK\n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n\n        // Intenta parsear JSON\n        let data;\n        const text = await response.text(); // Primero lee como texto\n        try {\n          data = JSON.parse(text);\n        } catch (jsonError) {\n          console.warn(\"Respuesta no es JSON válido:\", text);\n          // Si llegó aquí, pero se guardó en la hoja, asumimos éxito\n          data = {\n            result: \"success\"\n          };\n        }\n        if (data.result !== 'success') {\n          throw new Error(data.error || 'Error del servidor');\n        }\n\n        // ÉXITO\n        this.$refs.contactForm.resetForm();\n        this.name = \"\";\n        this.lastname = \"\";\n        this.email = \"\";\n        this.phone = \"\";\n        this.message = \"\";\n        Swal.fire({\n          title: \"¡Mensaje Enviado!\",\n          text: \"Gracias por contactarnos. Te responderemos pronto.\",\n          icon: \"success\",\n          confirmButtonColor: \"#007bff\",\n          timer: 4000,\n          timerProgressBar: true\n        });\n      } catch (error) {\n        console.error(\"Error al enviar:\", error);\n        Swal.fire({\n          title: \"Error\",\n          text: \"Hubo un problema al enviar tu mensaje. Intenta de nuevo.\",\n          icon: \"error\",\n          confirmButtonColor: \"#dc3545\"\n        });\n      } finally {\n        this.isSubmitting = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["Swal","Form","Field","ErrorMessage","defineRule","configure","required","email","SCRIPT_URL","value","onlyLettersRegex","test","onlyNumbersRegex","phoneRegex","validateOnInput","generateMessage","context","messages","onlyLetters","textWithNumbers","phoneNumber","rule","name","components","data","lastname","phone","message","isSubmitting","mounted","methods","submitForm","formData","FormData","append","response","fetch","method","body","ok","Error","status","statusText","text","JSON","parse","jsonError","console","warn","result","error","$refs","contactForm","resetForm","fire","title","icon","confirmButtonColor","timer","timerProgressBar"],"sources":["C:\\Users\\Cerva\\Desktop\\web-servicio-internet\\src\\views\\ContactPage.vue"],"sourcesContent":["<template>\r\n  <div data-aos=\"fade-up\">\r\n    <div class=\"container p-4 p-md-5 shadow rounded-3 bg-light contact-form-container\">\r\n      <h2 class=\"text-center mb-3 text-primary fw-bold\">Contáctanos</h2>\r\n      <p class=\"text-center text-muted mb-4\">\r\n        ¿Tienes alguna consulta? Envíanos un mensaje.\r\n      </p>\r\n      <Form ref=\"contactForm\" @submit=\"submitForm\" v-slot=\"{ meta }\" class=\"animate__animated animate__fadeIn\">\r\n        <div class=\"row g-3\">\r\n          <div class=\"col-md-6\">\r\n             <label for=\"name\" class=\"form-label text-primary fw-semibold\">Nombre</label>\r\n             <Field type=\"text\" class=\"form-control border-primary\" id=\"name\" name=\"name\" rules=\"required|onlyLetters\" v-model=\"name\"/>\r\n             <ErrorMessage name=\"name\" class=\"text-danger small mt-1 d-block\" />\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n            <label for=\"lastname\" class=\"form-label text-primary fw-semibold\">Apellido</label>\r\n            <Field type=\"text\" class=\"form-control border-primary\" id=\"lastname\" name=\"lastname\" rules=\"required|onlyLetters\" v-model=\"lastname\"/>\r\n            <ErrorMessage name=\"lastname\" class=\"text-danger small mt-1 d-block\" />\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n            <label for=\"email\" class=\"form-label text-primary fw-semibold\">Correo Electrónico</label>\r\n            <Field type=\"email\" class=\"form-control border-primary\" id=\"email\" name=\"email\" rules=\"required|email\" v-model=\"email\"/>\r\n            <ErrorMessage name=\"email\" class=\"text-danger small mt-1 d-block\" />\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n             <label for=\"phone\" class=\"form-label text-primary fw-semibold\">Teléfono</label>\r\n             <Field type=\"text\" class=\"form-control border-primary\" id=\"phone\" name=\"phone\" rules=\"required|phoneNumber\" v-model=\"phone\"/>\r\n             <ErrorMessage name=\"phone\" class=\"text-danger small mt-1 d-block\" />\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <label for=\"message\" class=\"form-label text-primary fw-semibold\">Mensaje</label>\r\n            <Field as=\"textarea\" class=\"form-control border-primary fixed-textarea\" id=\"message\" name=\"message\" rules=\"required|textWithNumbers\" v-model=\"message\"/>\r\n            <ErrorMessage name=\"message\" class=\"text-danger small mt-1 d-block\" />\r\n          </div>\r\n          <div class=\"col-12 text-center mt-4\">\r\n             <button\r\n               type=\"submit\"\r\n               class=\"btn btn-primary px-5 py-2 submit-button\"\r\n               :disabled=\"!meta.valid || isSubmitting\"\r\n               :class=\"{ 'sending': isSubmitting }\"\r\n               style=\"transition: all 0.3s;\"\r\n              >\r\n               <span v-if=\"!isSubmitting\">Enviar Mensaje</span>\r\n               <span v-else class=\"animate__animated animate__fadeIn\">\r\n                 <span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                 Enviando...\r\n               </span>\r\n             </button>\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Swal from \"sweetalert2\";\r\nimport { Form, Field, ErrorMessage, defineRule, configure } from \"vee-validate\";\r\nimport { required, email } from \"@vee-validate/rules\";\r\nimport 'aos/dist/aos.css';\r\n\r\nconst SCRIPT_URL = \"https://script.google.com/macros/s/AKfycbzyKIt1fHs6q8avqDymVh8S_a57HAH-_ZPWm3R1l1prwPH9zmPIbyx_09CMsalrdYDsRQ/exec\";\r\n\r\n// Definir reglas de validación (movido fuera del export default para mejor práctica)\r\ndefineRule(\"onlyLetters\", (value) => {\r\n  const onlyLettersRegex = /^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]+$/;\r\n  return !value || onlyLettersRegex.test(value) || \"Este campo solo debe contener letras y espacios.\";\r\n});\r\ndefineRule(\"textWithNumbers\", (value) => {\r\n  const onlyNumbersRegex = /^[0-9]+$/;\r\n  return !value || !onlyNumbersRegex.test(value) || \"El mensaje no puede contener solo números.\";\r\n});\r\ndefineRule(\"phoneNumber\", (value) => {\r\n  const phoneRegex = /^[0-9]{9}$/;\r\n  return !value || phoneRegex.test(value) || \"El teléfono debe tener 9 dígitos numéricos.\";\r\n});\r\ndefineRule(\"required\", required);\r\ndefineRule(\"email\", email);\r\n\r\nconfigure({\r\n  validateOnInput: true, // Validar mientras se escribe\r\n  generateMessage: (context) => {\r\n    const messages = {\r\n      required: \"Este campo es obligatorio.\",\r\n      email: \"Correo electrónico inválido.\",\r\n      onlyLetters: \"Solo se permiten letras y espacios.\",\r\n      textWithNumbers: \"No puede ser solo números.\",\r\n      phoneNumber: \"Debe tener 9 dígitos numéricos.\",\r\n    };\r\n    return messages[context.rule.name] || `Error en el campo.`;\r\n  },\r\n});\r\n\r\nexport default {\r\n  name: \"ContactPage\",\r\n  components: { Form, Field, ErrorMessage },\r\n  data() {\r\n    return {\r\n      name: \"\",\r\n      lastname: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      message: \"\",\r\n      isSubmitting: false,\r\n    };\r\n  },\r\n  mounted() {\r\n      // AOS se inicializa en la vista padre (HomePage)\r\n      // AOS.init({ duration: 1000 });\r\n  },\r\n  methods: {\r\n    async submitForm() {\r\n  this.isSubmitting = true;\r\n  const formData = new FormData();\r\n  formData.append('name', this.name);\r\n  formData.append('lastname', this.lastname);\r\n  formData.append('email', this.email);\r\n  formData.append('phone', this.phone);\r\n  formData.append('message', this.message);\r\n\r\n  try {\r\n    const response = await fetch(SCRIPT_URL, {\r\n      method: 'POST',\r\n      body: formData\r\n    });\r\n\r\n    // Verifica si la respuesta es OK\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    // Intenta parsear JSON\r\n    let data;\r\n    const text = await response.text(); // Primero lee como texto\r\n    try {\r\n      data = JSON.parse(text);\r\n    } catch (jsonError) {\r\n      console.warn(\"Respuesta no es JSON válido:\", text);\r\n      // Si llegó aquí, pero se guardó en la hoja, asumimos éxito\r\n      data = { result: \"success\" };\r\n    }\r\n\r\n    if (data.result !== 'success') {\r\n      throw new Error(data.error || 'Error del servidor');\r\n    }\r\n\r\n    // ÉXITO\r\n    this.$refs.contactForm.resetForm();\r\n    this.name = \"\"; this.lastname = \"\"; this.email = \"\"; this.phone = \"\"; this.message = \"\";\r\n\r\n    Swal.fire({\r\n      title: \"¡Mensaje Enviado!\",\r\n      text: \"Gracias por contactarnos. Te responderemos pronto.\",\r\n      icon: \"success\",\r\n      confirmButtonColor: \"#007bff\",\r\n      timer: 4000,\r\n      timerProgressBar: true,\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al enviar:\", error);\r\n    Swal.fire({\r\n      title: \"Error\",\r\n      text: \"Hubo un problema al enviar tu mensaje. Intenta de nuevo.\",\r\n      icon: \"error\",\r\n      confirmButtonColor: \"#dc3545\",\r\n    });\r\n  } finally {\r\n    this.isSubmitting = false;\r\n  }\r\n},\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Estilos específicos para este formulario */\r\n.contact-form-container {\r\n  max-width: 800px; /* Ancho máximo del formulario */\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  /* El fondo claro y el color de texto se heredan de main.css */\r\n}\r\n\r\n/* Ajustes menores para el formulario */\r\n.form-label {\r\n  font-weight: 600; /* Etiquetas un poco más gruesas */\r\n  color: #0d6efd; /* Color primario Bootstrap */\r\n}\r\n\r\n.form-control {\r\n  border-radius: 8px;\r\n  border: 1px solid #ced4da; /* Borde estándar */\r\n  padding: 0.75rem;\r\n}\r\n.form-control:focus {\r\n   border-color: #86b7fe; /* Borde azul al enfocar */\r\n   box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);\r\n}\r\n\r\n\r\n.fixed-textarea {\r\n  min-height: 120px; /* Un poco más alto */\r\n  resize: vertical; /* Permitir redimensionar verticalmente */\r\n}\r\n\r\n.submit-button {\r\n  font-size: 1.1rem; /* Tamaño de texto ligeramente menor */\r\n  font-weight: 600;\r\n  padding: 10px 30px;\r\n  border-radius: 50px; /* Botón redondeado */\r\n  transition: all 0.3s ease-in-out;\r\n  /* Usar el color primario de Bootstrap por defecto */\r\n  background-color: #0d6efd;\r\n  border-color: #0d6efd;\r\n}\r\n\r\n.submit-button:hover {\r\n  background-color: #0b5ed7 !important; /* Más oscuro al pasar el ratón */\r\n  border-color: #0a58ca !important;\r\n  transform: translateY(-2px); /* Ligera elevación */\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.submit-button:disabled {\r\n  background-color: #6c757d !important; /* Gris cuando deshabilitado */\r\n  border-color: #6c757d !important;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n  box-shadow: none;\r\n}\r\n\r\n/* Estilo para el estado 'enviando' */\r\n.submit-button.sending {\r\n  background-color: #ffc107 !important; /* Amarillo mientras envía */\r\n  border-color: #ffc107 !important;\r\n  color: #000; /* Texto oscuro en fondo amarillo */\r\n  cursor: not-allowed;\r\n}\r\n\r\n.text-danger {\r\n  font-size: 0.85rem; /* Mensajes de error un poco más pequeños */\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}